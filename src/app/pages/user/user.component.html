<div class="py-12">
  <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
    <div class="bg-base-200 sm:rounded-lg shadow-md">
      <div class="p-6 text-base-content flex-1 overflow-y-auto">
        <p class="items-center text-center mb-10 font-bold">Usuários</p>
        <a class="btn btn-primary m-2 btn-sm" href="/users/create"><i class="fa-solid fa-user-plus"></i>Adicionar</a>
        <table class="table w-full">
          <!-- head -->
          <thead>
            <tr>
              <th>ID</th>
              <th>Nome</th>
              <th>E-mail</th>
              <th>Data Nascimento</th>
              <th>Admin?</th>
              <th class="text-center">Ações</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td>{{ user.id }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.birthdate | date:'dd/MM/yyyy' }}</td>
              <td>{{ user.isAdmin ? "Sim" : "Não" }}</td>
              <td class="text-center">
                <button class="btn btn-sm" (click)="openModal(user)">
                  <i class="fa-solid fa-user-pen"></i>
                </button>

                <button class="btn btn-sm" (click)="deleteUser(user)">
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- Modal -->
  <dialog id="myModal" class="modal">
    <div class="modal-box">
      <h3 class="font-bold text-lg">Dados do Usuário</h3>
      <div class="modal-action w-full flex flex-col">
        <form (ngSubmit)="updateUser()">
          <div class="mb-4">
            <label for="name" class="block text-gray-700 font-semibold mb-2"
              >Nome</label
            >
            <input
              id="name"
              type="text"
              class="input input-bordered w-full rounded"
              name="name"
              [(ngModel)]="selectedUser.name"
              required
            />
          </div>

          <div class="mb-4">
            <label for="email" class="block text-gray-700 font-semibold mb-2"
              >E-mail</label
            >
            <input
              id="email"
              type="email"
              class="input input-bordered w-full rounded"
              name="email"
              [(ngModel)]="selectedUser.email"
              required
            />
          </div>
          <div class="mb-4">
            <label for="password" class="block text-gray-700 font-semibold mb-2"
              >Password</label
            >
            <input
              id="password"
              type="password"
              class="input input-bordered w-full rounded"
              name="password"
              [value]="selectedUser.password"
              required
            />
          </div>

          <div class="mb-4">
            <label
              for="birthdate"
              class="block text-gray-700 font-semibold mb-2"
              >Data de Nascimento</label
            >
            <input
              id="birthdate"
              type="date"
              class="input input-bordered w-full rounded"
              name="birthdate"
              [(ngModel)]="selectedUser.birthdate"
            />
          </div>

          <div class="mb-4">
            <label for="admin" class="block text-gray-700 font-semibold"
              >Admin</label
            >
            <input
              id="admin"
              type="checkbox"
              class="checkbox checkbox-primary rounded"
              name="admin"
              [(ngModel)]="selectedUser.isAdmin"
            />
          </div>

          <div class="modal-action">
            <form method="dialog">
              <button class="btn btn-error">Fechar</button>
            </form>
            <button
              type="submit"
              class="btn btn-primary text-white font-semibold py-2 px-4 rounded"
            >
              Salvar
            </button>
          </div>
        </form>
      </div>
    </div>
  </dialog>
</div>
